THREE.OrbitControls=function(t,e){this.object=t,this.domElement=void 0!==e?e:document,this.enabled=!0,this.center=new THREE.Vector3,this.userZoom=!0,this.userZoomSpeed=1,this.userRotate=!0,this.userRotateSpeed=1,this.userPan=!0,this.userPanSpeed=2,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minDistance=0,this.maxDistance=1/0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40,ROTATE:65,ZOOM:83,PAN:68};var n=this,o=1800,i=new THREE.Vector2,s=new THREE.Vector2,a=new THREE.Vector2,c=new THREE.Vector2,r=new THREE.Vector2,h=new THREE.Vector2,u=0,d=0,m=1,E=new THREE.Vector3,l={NONE:-1,ROTATE:0,ZOOM:1,PAN:2},O=l.NONE,p={type:"change"};function v(){return 2*Math.PI/60/60*n.autoRotateSpeed}function M(){return Math.pow(.95,n.userZoomSpeed)}function T(t){if(!1!==n.enabled)if(t.preventDefault(),O===l.ROTATE)s.set(t.clientX,t.clientY),a.subVectors(s,i),n.rotateLeft(2*Math.PI*a.x/o*n.userRotateSpeed),n.rotateUp(2*Math.PI*a.y/o*n.userRotateSpeed),i.copy(s);else if(O===l.ZOOM)r.set(t.clientX,t.clientY),h.subVectors(r,c),h.y>0?n.zoomIn():n.zoomOut(),c.copy(r);else if(O===l.PAN){var e=t.movementX||t.mozMovementX||t.webkitMovementX||0,u=t.movementY||t.mozMovementY||t.webkitMovementY||0;n.pan(new THREE.Vector3(-e,u,0))}}function R(t){!1!==n.enabled&&!1!==n.userRotate&&(document.removeEventListener("mousemove",T,!1),document.removeEventListener("mouseup",R,!1),O=l.NONE)}function f(t){if(!1!==n.enabled&&!1!==n.userZoom){var e=0;t.wheelDelta?e=t.wheelDelta:t.detail&&(e=-t.detail),e>0?n.zoomOut():n.zoomIn()}}this.rotateLeft=function(t){void 0===t&&(t=v()),d-=t},this.rotateRight=function(t){void 0===t&&(t=v()),d+=t},this.rotateUp=function(t){void 0===t&&(t=v()),u-=t},this.rotateDown=function(t){void 0===t&&(t=v()),u+=t},this.zoomIn=function(t){void 0===t&&(t=M()),m/=t},this.zoomOut=function(t){void 0===t&&(t=M()),m*=t},this.pan=function(t){t.transformDirection(this.object.matrix),t.multiplyScalar(n.userPanSpeed),this.object.position.add(t),this.center.add(t)},this.update=function(){var t=this.object.position,e=t.clone().sub(this.center),n=Math.atan2(e.x,e.z),o=Math.atan2(Math.sqrt(e.x*e.x+e.z*e.z),e.y);this.autoRotate&&this.rotateLeft(v()),n+=d,o+=u,o=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,o)),o=Math.max(1e-6,Math.min(Math.PI-1e-6,o));var i=e.length()*m;i=Math.max(this.minDistance,Math.min(this.maxDistance,i)),e.x=i*Math.sin(o)*Math.sin(n),e.y=i*Math.cos(o),e.z=i*Math.sin(o)*Math.cos(n),t.copy(this.center).add(e),this.object.lookAt(this.center),d=0,u=0,m=1,E.distanceTo(this.object.position)>0&&(this.dispatchEvent(p),E.copy(this.object.position))},this.domElement.addEventListener("contextmenu",function(t){t.preventDefault()},!1),this.domElement.addEventListener("mousedown",function(t){!1!==n.enabled&&!1!==n.userRotate&&(t.preventDefault(),O===l.NONE&&(0===t.button&&(O=l.ROTATE),1===t.button&&(O=l.ZOOM),2===t.button&&(O=l.PAN)),O===l.ROTATE?i.set(t.clientX,t.clientY):O===l.ZOOM?c.set(t.clientX,t.clientY):l.PAN,document.addEventListener("mousemove",T,!1),document.addEventListener("mouseup",R,!1))},!1),this.domElement.addEventListener("mousewheel",f,!1),this.domElement.addEventListener("DOMMouseScroll",f,!1),window.addEventListener("keydown",function(t){if(!1!==n.enabled&&!1!==n.userPan)switch(t.keyCode){case n.keys.ROTATE:O=l.ROTATE;break;case n.keys.ZOOM:O=l.ZOOM;break;case n.keys.PAN:O=l.PAN}},!1),window.addEventListener("keyup",function(t){switch(t.keyCode){case n.keys.ROTATE:case n.keys.ZOOM:case n.keys.PAN:O=l.NONE}},!1)},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype);